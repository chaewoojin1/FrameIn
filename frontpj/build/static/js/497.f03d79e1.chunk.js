"use strict";(self.webpackChunkfrontpj=self.webpackChunkfrontpj||[]).push([[497],{8497:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var s=n(5043),c=n(5081),r=n.n(c),o=n(3595),i=n(1675),d=n(579);const a=()=>{const[e,t]=(0,s.useState)(!1),[n,c]=(0,s.useState)([]),a=(0,s.useRef)(),l=(0,s.useRef)();let h=(0,s.useRef)(null);const u=()=>{alert("\uc811\uc18d");const e=new(r())("http://43.201.20.172:8090/chatEndpoint");h.current=o.q.over(e),h.current.connect({},(e=>{console.log("Connected: ->",e),h.current.send("/app/hello",{},JSON.stringify({content:"GUEST"})),h.current.subscribe("/topic/greetings",(e=>{console.log(e.body),p(JSON.parse(e.body).body.message)})),h.current.subscribe("/topic/message",(e=>{console.log(e.body),p(JSON.parse(e.body).body.message)}))}))},p=e=>{c((t=>[...t,e]))};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"chat",children:(0,d.jsx)("div",{id:"chat-bot",children:(0,d.jsxs)("div",{className:"wrap",children:[(0,d.jsx)("button",{type:"button",id:"btn-chat-open",onClick:()=>{t(!0),u()},children:"OPEN"}),e&&(0,d.jsx)("div",{id:"chat-disp",className:"show",children:(0,d.jsxs)("div",{id:"chat-disp-con",children:[(0,d.jsxs)("div",{id:"chat-header",children:[(0,d.jsx)("span",{children:"Chat-Bot(WebSocket)"}),(0,d.jsx)("button",{type:"button",id:"close",onClick:()=>{h.current&&h.current.disconnect(),t(!1),c([])},children:"X"})]}),(0,d.jsx)("div",{id:"chat-content",ref:l,children:n.map(((e,t)=>(0,d.jsx)("div",{className:"data-con",children:e},t)))}),(0,d.jsxs)("div",{id:"chat-question",className:"flex between",children:[(0,d.jsx)("input",{type:"text",id:"question",ref:a,placeholder:"\uc9c8\ubb38\uc744 \uc785\ub825\ud558\uc138\uc694"}),(0,d.jsx)("button",{type:"button",id:"btn-msg-send",onClick:()=>{const e=a.current.value.trim();0!==e.length?(p(e),h.current&&h.current.send("/app/message",{},JSON.stringify({content:e}))):alert("\uc9c8\ubb38 \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694")},children:"\uc804\uc1a1"})]})]})})]})})}),(0,d.jsx)(i.N_,{to:"/Komoran",children:"Komoran"})]})},l=()=>(0,d.jsx)(a,{})}}]);
//# sourceMappingURL=497.f03d79e1.chunk.js.map