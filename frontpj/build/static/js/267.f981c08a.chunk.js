"use strict";(self.webpackChunkfrontpj=self.webpackChunkfrontpj||[]).push([[267],{1267:(e,s,r)=>{r.r(s),r.d(s,{default:()=>c});var a=r(5043),n=r(9320),t=r(579);const i=()=>{const[e,s]=(0,a.useState)({}),[r,i]=(0,a.useState)(null),c={kakaoPay:"\uce74\uce74\uc624\ud398\uc774",tossPay:"\ud1a0\uc2a4\ud398\uc774",credit_card:"\uc2e0\uc6a9\uce74\ub4dc",mobile:"\ud734\ub300\ud3f0"};return(0,a.useEffect)((()=>{(async()=>{try{const e=await n.A.get("http://43.201.20.172:8090/api/payment/myPaymentList",{withCredentials:!0}),r=(Array.isArray(e.data)?e.data:[]).reduce(((e,s)=>{const r=s.createTime.substring(0,19);return e[r]||(e[r]={representativePayment:s,payments:[]}),e[r].payments.push(s),e}),{});s(r)}catch(e){console.error("\uacb0\uc81c \ub0b4\uc5ed \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}})()}),[]),(0,t.jsx)("div",{className:"paymentHistoryContainer",children:(0,t.jsxs)("div",{className:"paymentHistory",children:[(0,t.jsx)("h3",{children:"\uacb0\uc81c \ub0b4\uc5ed"}),Object.keys(e).length>0?(0,t.jsx)("div",{className:"paymentList",children:Object.entries(e).map(((e,s)=>{let[a,n]=e;return(0,t.jsxs)("div",{className:"paymentGroup",children:[(0,t.jsxs)("div",{className:"paymentHeader",onClick:()=>i(r===a?null:a),children:[(0,t.jsxs)("span",{children:[new Date(a).toLocaleDateString()," \uacb0\uc81c"]}),(0,t.jsxs)("span",{className:"totalAmount",children:[n.representativePayment.totalAmount.toLocaleString()," ","\uc6d0"]})]}),r===a&&(0,t.jsx)("div",{className:"paymentDetails",children:n.payments.map(((e,s)=>(0,t.jsxs)("div",{className:"paymentItem",children:[(0,t.jsx)("img",{src:e.posterPath,alt:e.movieNm,className:"poster"}),(0,t.jsxs)("div",{className:"paymentInfo",children:[(0,t.jsx)("div",{children:(0,t.jsx)("span",{children:e.movieNm})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"paymentCinema-title",children:[e.cinemaName," Frame In"]})," ",(0,t.jsx)("span",{children:e.theaterName})," ",(0,t.jsx)("span",{children:e.seatNumber})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:"\uc0c1\uc601\uc77c:"})," ",(0,t.jsxs)("span",{children:[e.screeningDate," "]}),(0,t.jsxs)("span",{children:[e.screeningTime," ~ ",e.screeningEndTime]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:"\uacb0\uc81c \ubc29\ubc95:"})," ",(0,t.jsx)("span",{children:c[e.paymentMethod]})]})]})]},s)))})]},s)}))}):(0,t.jsx)("span",{children:"\uacb0\uc81c \ub0b4\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]})})},c=()=>(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i,{})})},9320:(e,s,r)=>{r.d(s,{A:()=>i});var a=r(6213),n=r(8056);const t=a.A.create();t.interceptors.request.use((e=>{const s=(0,n.Ri)("member");if(!s)return Promise.reject({response:{data:{error:"REQUIRE_LOGIN"}}});const{accessToken:r}=s;return e.headers.Authorization=`Bearer ${r}`,e}),(e=>Promise.reject(e))),t.interceptors.response.use((async e=>{const s=e.data;if(s&&"ERROR_ACCESS_TOKEN"===s.error){const s=(0,n.Ri)("member"),r=await(async(e,s)=>{const r={headers:{Authorization:`Bearer ${e}`}};return(await a.A.get(`http://43.201.20.172:8090/api/member/refresh?refreshToken=${s}`,r)).data})(s.accessToken,s.refreshToken);s.accessToken=r.accessToken,s.refreshToken=r.refreshToken,(0,n.TV)("member",JSON.stringify(s),1);const t=e.config;return t.headers.Authorization=`Bearer ${r.accessToken}`,await(0,a.A)(t)}return e}),(e=>Promise.reject(e)));const i=t}}]);
//# sourceMappingURL=267.f981c08a.chunk.js.map