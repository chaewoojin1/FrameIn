{"version":3,"file":"static/js/613.3e6a3783.chunk.js","mappings":"gKAIA,MAwBA,EAxBaA,KACT,MAAOC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,IAgBjC,OAdAC,EAAAA,EAAAA,YAAU,KACYC,WACd,IACI,MAAMC,QAAiBC,EAAAA,EAASC,IAAI,sCACpCN,EAAQI,EAASL,KAAKQ,MAC1B,CAAE,MAAOC,GACLC,QAAQD,MAAM,uBAAwBA,GACtCR,EAAQ,4DACZ,GAGJU,EAAW,GACZ,KAGCC,EAAAA,EAAAA,KAAA,OAAAC,UACID,EAAAA,EAAAA,KAAA,MAAAC,SAAKb,KACH,ECbd,EARiBc,KAETF,EAAAA,EAAAA,KAAAG,EAAAA,SAAA,CAAAF,UACID,EAAAA,EAAAA,KAACb,EAAI,K,0DCHjB,MAAMO,EAASU,EAAAA,EAAMC,SAuDrBX,EAASY,aAAaC,QAAQC,KA9CZC,IACd,MAAMC,GAAWC,EAAAA,EAAAA,IAAU,UAC3B,IAAID,EACA,OAAOE,QAAQC,OACX,CAACpB,SACA,CAACL,KACA,CAACS,MAAO,oBAKlB,MAAM,YAACiB,GAAeJ,EAEtB,OADAD,EAAOM,QAAQC,cAAe,UAAUF,IACjCL,CAAM,IAGEQ,GACRL,QAAQC,OAAOI,KA8B1BvB,EAASY,aAAab,SAASe,KA3BfhB,UAEZ,MAAMJ,EAAM8B,EAAI9B,KAChB,GAAGA,GAAsB,uBAAdA,EAAKS,MAA8B,CAC1C,MAAMsB,GAAkBR,EAAAA,EAAAA,IAAU,UAC5BS,OAhCI5B,OAAOsB,EAAaO,KAClC,MAAMC,EAAQ,CAACP,QAAS,CAAC,cAAiB,UAAUD,MAGpD,aAFkBV,EAAAA,EAAMT,IAAI,6DAA6D0B,IAAgBC,IAE9FlC,IAAI,EA4BQmC,CAAWJ,EAAkBL,YAC5CK,EAAkBE,cACtBF,EAAkBL,YAAYM,EAAON,YACrCK,EAAkBE,aAAaD,EAAOC,cAEtCG,EAAAA,EAAAA,IAAU,SAAUC,KAAKC,UAAUP,GAAoB,GAEvD,MAAMQ,EAAgBT,EAAIT,OAG1B,OAFAkB,EAAgBZ,QAAQC,cAAe,UAAUI,EAAON,oBAE3CV,EAAAA,EAAAA,GAAMuB,EACvB,CAGA,OAAOT,CAAG,IAGMD,GACTL,QAAQC,OAAOI,KAM1B,S","sources":["components/test/Test.jsx","pages/test/TestPage.jsx","util/jwtUtil.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport jwtAxios from '../../util/jwtUtil';\r\n\r\nconst Test = () => {\r\n    const [data, setData] = useState('');\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const response = await jwtAxios.get('http://43.201.20.172:8090/api/test');\r\n                setData(response.data.admin);\r\n            } catch (error) {\r\n                console.error('Error fetching data:', error);\r\n                setData('접근 권한이 없습니다.');\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <h1>{data}</h1>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Test;\r\n","import React from 'react'\r\nimport Test from '../../components/test/Test'\r\n\r\nconst TestPage = () => {\r\n    return (\r\n        <>\r\n            <Test />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default TestPage","import axios from \"axios\";\r\nimport { getCookie, setCookie } from \"./cookieUtil\";\r\n\r\nconst jwtAxios=axios.create()\r\n\r\nconst refreshJWT= async (accessToken, refreshToken)=>{\r\n    const header= {headers: {\"Authorization\": `Bearer ${accessToken}`}}\r\n    const res = await axios.get(`http://43.201.20.172:8090/api/member/refresh?refreshToken=${refreshToken}`, header)\r\n\r\n    return res.data\r\n}\r\n\r\nconst beforeReq= (config) =>{\r\n    const memberInfo=getCookie(\"member\")\r\n    if(!memberInfo){\r\n        return Promise.reject(\r\n            {response:\r\n             {data: \r\n              {error: \"REQUIRE_LOGIN\"}\r\n                }\r\n            }\r\n        )\r\n    }\r\n    const {accessToken} = memberInfo\r\n    config.headers.Authorization= `Bearer ${accessToken}`\r\n    return config\r\n}\r\n\r\nconst requestFail=(err)=>{\r\n    return Promise.reject(err)\r\n}\r\n\r\nconst beforeRes=async (res)=>{\r\n\r\n    const data= res.data\r\n    if(data && data.error ==='ERROR_ACCESS_TOKEN'){\r\n        const memberCookieValue=getCookie(\"member\")\r\n        const result=await refreshJWT(memberCookieValue.accessToken,\r\n            memberCookieValue.refreshToken)\r\n        memberCookieValue.accessToken=result.accessToken\r\n        memberCookieValue.refreshToken=result.refreshToken\r\n\r\n        setCookie(\"member\", JSON.stringify(memberCookieValue), 1)\r\n\r\n        const originalRequest=res.config\r\n        originalRequest.headers.Authorization= `Bearer ${result.accessToken}`\r\n\r\n        return await axios(originalRequest)\r\n    }\r\n\r\n\r\n    return res\r\n}\r\n\r\nconst responseFail=(err)=>{\r\n    return Promise.reject(err)\r\n}\r\n\r\njwtAxios.interceptors.request.use( beforeReq, requestFail)\r\njwtAxios.interceptors.response.use(beforeRes,responseFail)\r\n\r\nexport default jwtAxios"],"names":["Test","data","setData","useState","useEffect","async","response","jwtAxios","get","admin","error","console","fetchData","_jsx","children","TestPage","_Fragment","axios","create","interceptors","request","use","config","memberInfo","getCookie","Promise","reject","accessToken","headers","Authorization","err","res","memberCookieValue","result","refreshToken","header","refreshJWT","setCookie","JSON","stringify","originalRequest"],"sourceRoot":""}