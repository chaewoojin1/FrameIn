"use strict";(self.webpackChunkfrontpj=self.webpackChunkfrontpj||[]).push([[711],{1711:(e,n,t)=>{t.r(n),t.d(n,{default:()=>r});var s=t(5043),a=(t(8127),t(9320)),l=t(579);const r=()=>{const[e,n]=(0,s.useState)([]),[t,r]=(0,s.useState)(null),[i,c]=(0,s.useState)(!1),[d,o]=(0,s.useState)({region:"",cinemaName:"",lat:"",lon:"",address:""}),[h,u]=(0,s.useState)("cinemaName"),[m,x]=(0,s.useState)(""),[j,p]=(0,s.useState)(0),[v,g]=(0,s.useState)(0);(0,s.useEffect)((()=>{b()}),[j,h,m]);const b=async()=>{try{const e=await a.A.get("http://43.201.20.172:8090/admin/cinemas/search",{params:{page:j,size:10,[h]:m}});e.data&&e.data.content?(n(e.data.content),g(e.data.totalPages)):(n([]),g(0))}catch(e){console.error("\uc601\ud654\uad00 \ub370\uc774\ud130 \uac00\uc838\uc624\uae30 \uc2e4\ud328:",e),n([])}},k=e=>{const{name:n,value:t}=e.target;o((e=>({...e,[n]:t})))},f=Math.max(0,j-2),C=Math.min(v-1,j+2),N=[];for(let s=f;s<=C;s++)N.push(s);const y=e=>{e>=0&&e<v&&p(e)};return(0,l.jsxs)("div",{className:"cinema-management",children:[(0,l.jsx)("h2",{children:"\uc601\ud654\uad00 \uad00\ub9ac"}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p(0),b()},className:"search-form",children:[(0,l.jsxs)("select",{value:h,onChange:e=>u(e.target.value),children:[(0,l.jsx)("option",{value:"cinemaName",children:"\uc601\ud654\uad00 \uc774\ub984"}),(0,l.jsx)("option",{value:"region",children:"\uc9c0\uc5ed"})]}),(0,l.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"\uac80\uc0c9\uc5b4 \uc785\ub825"}),(0,l.jsx)("button",{type:"submit",children:"\uac80\uc0c9"})]}),(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"ID"}),(0,l.jsx)("th",{children:"\uc9c0\uc5ed"}),(0,l.jsx)("th",{children:"\uc774\ub984"}),(0,l.jsx)("th",{children:"\uc704\ub3c4"}),(0,l.jsx)("th",{children:"\uacbd\ub3c4"}),(0,l.jsx)("th",{children:"\uc8fc\uc18c"}),(0,l.jsx)("th",{children:"\ubcf4\uae30"})]})}),(0,l.jsx)("tbody",{children:e.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.id}),(0,l.jsx)("td",{children:e.region||"null"}),(0,l.jsx)("td",{children:e.cinemaName||"null"}),(0,l.jsx)("td",{children:null!==e.lat?e.lat:"null"}),(0,l.jsx)("td",{children:null!==e.lon?e.lon:"null"}),(0,l.jsx)("td",{children:e.address||"null"}),(0,l.jsx)("td",{children:(0,l.jsx)("span",{onClick:()=>(e=>{r(e),o({region:e.region||"null",cinemaName:e.cinemaName||"null",lat:null!==e.lat?e.lat:"null",lon:null!==e.lon?e.lon:"null",address:e.address||"null"}),c(!0)})(e),children:"\uc218\uc815"})})]},e.id)))})]}),(0,l.jsxs)("div",{className:"pagination",children:[(0,l.jsx)("button",{onClick:()=>y(0),disabled:0===j,children:"\ucc98\uc74c"}),(0,l.jsx)("button",{onClick:()=>y(j-1),disabled:0===j,children:"\uc774\uc804"}),N.map((e=>(0,l.jsx)("button",{onClick:()=>y(e),className:j===e?"active":"",children:e+1},e))),(0,l.jsx)("button",{onClick:()=>y(j+1),disabled:j===v-1,children:"\ub2e4\uc74c"}),(0,l.jsx)("button",{onClick:()=>y(v-1),disabled:j===v-1,children:"\ub9c8\uc9c0\ub9c9"})]}),i&&(0,l.jsx)("div",{className:"admin-modal",children:(0,l.jsxs)("div",{className:"admin-modal-content",children:[(0,l.jsx)("h3",{children:"\uc601\ud654\uad00 \uc218\uc815"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{children:"\uc9c0\uc5ed"}),(0,l.jsx)("input",{type:"text",name:"region",value:d.region,onChange:k})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{children:"\uc774\ub984"}),(0,l.jsx)("input",{type:"text",name:"cinemaName",value:d.cinemaName,onChange:k})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{children:"\uc704\ub3c4"}),(0,l.jsx)("input",{type:"text",name:"lat",value:d.lat,onChange:k})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{children:"\uacbd\ub3c4"}),(0,l.jsx)("input",{type:"text",name:"lon",value:d.lon,onChange:k})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{children:"\uc8fc\uc18c"}),(0,l.jsx)("input",{type:"text",name:"address",value:d.address,onChange:k})]}),(0,l.jsxs)("div",{className:"modal-actions",children:[(0,l.jsx)("button",{onClick:async()=>{try{await a.A.delete(`http://43.201.20.172:8090/admin/delete/${t.id}`),b(),c(!1)}catch(e){console.error("\uc0ad\uc81c \uc2e4\ud328:",e)}},children:"\uc0ad\uc81c"}),(0,l.jsx)("button",{onClick:async()=>{try{const e={...d,lat:"null"===d.lat?null:parseFloat(d.lat),lon:"null"===d.lon?null:parseFloat(d.lon)};await a.A.post(`http://43.201.20.172:8090/admin/update/${t.id}`,e),b(),c(!1)}catch(e){console.error("\uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",e)}},children:"\uc218\uc815"}),(0,l.jsx)("span",{className:"modal-close-btn",onClick:()=>c(!1),children:"\u2716"})]})]})})]})}},8127:()=>{},9320:(e,n,t)=>{t.d(n,{A:()=>r});var s=t(6213),a=t(8056);const l=s.A.create();l.interceptors.request.use((e=>{const n=(0,a.Ri)("member");if(!n)return Promise.reject({response:{data:{error:"REQUIRE_LOGIN"}}});const{accessToken:t}=n;return e.headers.Authorization=`Bearer ${t}`,e}),(e=>Promise.reject(e))),l.interceptors.response.use((async e=>{const n=e.data;if(n&&"ERROR_ACCESS_TOKEN"===n.error){const n=(0,a.Ri)("member"),t=await(async(e,n)=>{const t={headers:{Authorization:`Bearer ${e}`}};return(await s.A.get(`http://43.201.20.172:8090/api/member/refresh?refreshToken=${n}`,t)).data})(n.accessToken,n.refreshToken);n.accessToken=t.accessToken,n.refreshToken=t.refreshToken,(0,a.TV)("member",JSON.stringify(n),1);const l=e.config;return l.headers.Authorization=`Bearer ${t.accessToken}`,await(0,s.A)(l)}return e}),(e=>Promise.reject(e)));const r=l}}]);
//# sourceMappingURL=711.cb76bae0.chunk.js.map