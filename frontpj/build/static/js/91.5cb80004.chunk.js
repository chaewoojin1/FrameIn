"use strict";(self.webpackChunkfrontpj=self.webpackChunkfrontpj||[]).push([[91],{6091:(e,s,a)=>{a.r(s),a.d(s,{default:()=>r});var n=a(5043),t=a(9320),i=a(579);const r=()=>{const[e,s]=(0,n.useState)([]),[a,r]=(0,n.useState)(0),[c,l]=(0,n.useState)(0),[o,d]=(0,n.useState)("email"),[h,m]=(0,n.useState)(""),[j,u]=(0,n.useState)(null),[x,p]=(0,n.useState)(!1),[k,b]=(0,n.useState)({email:"",pw:"",nickname:"",social:!1,roleNames:[]}),v=async()=>{try{const e=await t.A.get("http://43.201.20.172:8090/admin/members/search",{params:{page:a,size:10,[o]:h}});e.data&&e.data.content?(s(e.data.content),l(e.data.totalPages)):(s([]),l(0))}catch(e){console.error("\uba64\ubc84 \ub370\uc774\ud130 \uac00\uc838\uc624\uae30 \uc2e4\ud328:",e),s([]),l(0)}};(0,n.useEffect)((()=>{v()}),[a,o,h]);const N=e=>{const{name:s,value:a,type:n,checked:t}=e.target;b((e=>({...e,[s]:"checkbox"===n?t:a})))},f=e=>{e>=0&&e<c&&r(e)},C=Math.max(0,a-2),y=Math.min(c-1,a+2),g=[];for(let n=C;n<=y;n++)g.push(n);return(0,i.jsxs)("div",{className:"member-list-container",children:[(0,i.jsx)("h2",{children:"\ud68c\uc6d0 \uad00\ub9ac"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(0),v()},className:"search-form",children:[(0,i.jsxs)("select",{value:o,onChange:e=>d(e.target.value),children:[(0,i.jsx)("option",{value:"email",children:"\uc774\uba54\uc77c"}),(0,i.jsx)("option",{value:"nickname",children:"\ub2c9\ub124\uc784"})]}),(0,i.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"\uac80\uc0c9\uc5b4 \uc785\ub825"}),(0,i.jsx)("button",{type:"submit",children:"\uac80\uc0c9"})]}),(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"\uc774\uba54\uc77c"}),(0,i.jsx)("th",{children:"\ub2c9\ub124\uc784"}),(0,i.jsx)("th",{children:"\uc18c\uc15c \ub85c\uadf8\uc778"}),(0,i.jsx)("th",{children:"\uad8c\ud55c"}),(0,i.jsx)("th",{children:"\ubcf4\uae30"})]})}),(0,i.jsx)("tbody",{children:e.map((e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.email}),(0,i.jsx)("td",{children:e.nickname}),(0,i.jsx)("td",{children:e.social?"\uc608":"\uc544\ub2c8\uc624"}),(0,i.jsx)("td",{children:e.roleNames&&e.roleNames.join(", ")}),(0,i.jsx)("td",{children:(0,i.jsx)("span",{onClick:()=>(e=>{u(e),b({email:e.email,pw:"",nickname:e.nickname,social:e.social,roleNames:e.roleNames&&e.roleNames.length>0?[e.roleNames[0]]:[]}),p(!0)})(e),children:"\uc218\uc815"})})]},e.email)))})]}),(0,i.jsxs)("div",{className:"pagination",children:[(0,i.jsx)("button",{onClick:()=>f(0),disabled:0===a,children:"\ucc98\uc74c"}),(0,i.jsx)("button",{onClick:()=>f(a-1),disabled:0===a,children:"\uc774\uc804"}),g.map((e=>(0,i.jsx)("button",{onClick:()=>f(e),className:a===e?"active":"",children:e+1},e))),(0,i.jsx)("button",{onClick:()=>f(a+1),disabled:a===c-1,children:"\ub2e4\uc74c"}),(0,i.jsx)("button",{onClick:()=>f(c-1),disabled:a===c-1,children:"\ub9c8\uc9c0\ub9c9"})]}),x&&(0,i.jsx)("div",{className:"admin-modal",children:(0,i.jsxs)("div",{className:"admin-modal-content",children:[(0,i.jsx)("h3",{children:"\ud68c\uc6d0 \uc218\uc815/\uc0ad\uc81c"}),(0,i.jsxs)("form",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:"\uc774\uba54\uc77c"}),(0,i.jsx)("input",{type:"email",name:"email",value:k.email,disabled:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:"\ube44\ubc00\ubc88\ud638 (\ubcc0\uacbd \uc2dc \uc785\ub825, \ubbf8\uc785\ub825 \uc2dc \uae30\uc874 \uc720\uc9c0)"}),(0,i.jsx)("input",{type:"password",name:"pw",value:k.pw,onChange:N,placeholder:"\uc0c8 \ube44\ubc00\ubc88\ud638"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:"\ub2c9\ub124\uc784"}),(0,i.jsx)("input",{type:"text",name:"nickname",value:k.nickname,onChange:N})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:"\uad8c\ud55c"}),(0,i.jsxs)("select",{name:"roleNames",value:k.roleNames[0]||"",onChange:e=>b((s=>({...s,roleNames:[e.target.value]}))),children:[(0,i.jsx)("option",{value:"ADMIN",children:"ADMIN"}),(0,i.jsx)("option",{value:"MANAGER",children:"MANAGER"}),(0,i.jsx)("option",{value:"USER",children:"USER"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{children:"\uc18c\uc15c \ub85c\uadf8\uc778"}),(0,i.jsx)("input",{type:"checkbox",name:"social",checked:k.social,disabled:!0})]})]}),(0,i.jsxs)("div",{className:"modal-actions",children:[(0,i.jsx)("button",{onClick:async()=>{if(window.confirm("\uc815\ub9d0\ub85c \uc774 \ud68c\uc6d0\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await t.A.delete(`http://43.201.20.172:8090/admin/members/${j.email}`),v(),p(!1),u(null),b({email:"",pw:"",nickname:"",social:!1,roleNames:[]})}catch(e){console.error("\uba64\ubc84 \uc0ad\uc81c \uc624\ub958:",e)}},children:"\uc0ad\uc81c"}),(0,i.jsx)("button",{onClick:async()=>{try{await t.A.put(`http://43.201.20.172:8090/admin/members/${j.email}`,k,{headers:{"Content-Type":"application/json"}}),v(),p(!1),u(null),b({email:"",pw:"",nickname:"",social:!1,roleNames:[]})}catch(e){console.error("\uba64\ubc84 \uc218\uc815 \uc624\ub958:",e)}},children:"\uc218\uc815"}),(0,i.jsx)("span",{className:"modal-close-btn",onClick:()=>p(!1),children:"\u2716"})]})]})})]})}},9320:(e,s,a)=>{a.d(s,{A:()=>r});var n=a(6213),t=a(8056);const i=n.A.create();i.interceptors.request.use((e=>{const s=(0,t.Ri)("member");if(!s)return Promise.reject({response:{data:{error:"REQUIRE_LOGIN"}}});const{accessToken:a}=s;return e.headers.Authorization=`Bearer ${a}`,e}),(e=>Promise.reject(e))),i.interceptors.response.use((async e=>{const s=e.data;if(s&&"ERROR_ACCESS_TOKEN"===s.error){const s=(0,t.Ri)("member"),a=await(async(e,s)=>{const a={headers:{Authorization:`Bearer ${e}`}};return(await n.A.get(`http://43.201.20.172:8090/api/member/refresh?refreshToken=${s}`,a)).data})(s.accessToken,s.refreshToken);s.accessToken=a.accessToken,s.refreshToken=a.refreshToken,(0,t.TV)("member",JSON.stringify(s),1);const i=e.config;return i.headers.Authorization=`Bearer ${a.accessToken}`,await(0,n.A)(i)}return e}),(e=>Promise.reject(e)));const r=i}}]);
//# sourceMappingURL=91.5cb80004.chunk.js.map