"use strict";(self.webpackChunkfrontpj=self.webpackChunkfrontpj||[]).push([[577],{2577:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(5043),s=a(6213),i=a(1675),l=(a(8127),a(3003)),r=a(9320),c=a(579);const o=()=>{var e;const[t,a]=(0,n.useState)([]),[o,d]=(0,n.useState)(""),[h,m]=(0,n.useState)([]),[u,j]=(0,n.useState)("title"),[p,x]=(0,n.useState)(1),[g]=(0,n.useState)(10),[b,v]=(0,n.useState)("all"),N=((0,i.Zp)(),(0,l.d4)((e=>e.loginSlice))),[k,y]=(0,n.useState)(!1),[C,f]=(0,n.useState)(null),[S,w]=(0,n.useState)(0),[F,T]=(0,n.useState)({title:"",content:"",category:"",email:"",itemFile:null});(0,n.useEffect)((()=>{(async()=>{try{const e=await s.A.get("http://43.201.20.172:8090/board/List");a(e.data),m(e.data)}catch(e){console.error("\uc544\uc774\ud15c \ub9ac\uc2a4\ud2b8 \ubd88\ub7ec\uc624\uae30 \uc2e4\ud328",e)}})()}),[]);const A=e=>{const t=new Date(e),a=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0"),r=String(t.getSeconds()).padStart(2,"0");return a<2e3?null:`${a}-${n}-${s} ${i}:${l}:${r}`},L=e=>{console.log("\uc120\ud0dd\ub41c \uce74\ud14c\uace0\ub9ac:",e),v(e);let a=[];a="all"===e?t:t.filter((t=>t.category===e)),m(a),x(1)},$=p*g,I=$-g,E=h.slice(I,$)||[],M=e=>{x(e)},R=h.length||0,D=Math.ceil(R/g),{rangeStart:O,rangeEnd:_}=(()=>{const e=5*Math.floor((p-1)/5)+1;return{rangeStart:e,rangeEnd:Math.min(e+5-1,D)}})(),z=e=>{const{name:t,value:a,files:n}=e.target;T("itemFile"===t?e=>({...e,itemFile:n[0]}):"nickname"===t?e=>({...e,nickname:a}):e=>({...e,[t]:a}))},B=Math.max(0,S-2),P=Math.min(D-1,S+2),q=[];for(let n=B;n<=P;n++)q.push(n);return(0,c.jsxs)("div",{className:"board-list",children:[(0,c.jsx)("h2",{children:"\uac8c\uc2dc\uae00 \ub9ac\uc2a4\ud2b8"}),(0,c.jsxs)("div",{className:"category",children:[(0,c.jsx)("button",{onClick:()=>L("all"),className:"all"===b?"active-category":"",children:"\uc804\uccb4 \uac8c\uc2dc\ud310"}),(0,c.jsx)("button",{onClick:()=>L("\ubb38\uc758\uac8c\uc2dc\ud310"),className:"\ubb38\uc758\uac8c\uc2dc\ud310"===b?"active-category":"",children:"\ubb38\uc758\uac8c\uc2dc\ud310"}),(0,c.jsx)("button",{onClick:()=>L("\uc790\uc720\uac8c\uc2dc\ud310"),className:"\uc790\uc720\uac8c\uc2dc\ud310"===b?"active-category":"",children:"\uc790\uc720\uac8c\uc2dc\ud310"}),(0,c.jsx)("button",{onClick:()=>L("\uc601\ud654\uac8c\uc2dc\ud310"),className:"\uc601\ud654\uac8c\uc2dc\ud310"===b?"active-category":"",children:"\uc601\ud654\uac8c\uc2dc\ud310"}),(0,c.jsx)("button",{onClick:()=>L("\uacf5\uc9c0\uc0ac\ud56d"),className:"\uacf5\uc9c0\uc0ac\ud56d"===b?"active-category":"",children:"\uacf5\uc9c0\uc0ac\ud56d"})]}),(0,c.jsxs)("div",{className:"search-form",children:[(0,c.jsxs)("select",{value:u,onChange:e=>j(e.target.value),children:[(0,c.jsx)("option",{value:"title",children:"\uc81c\ubaa9"}),(0,c.jsx)("option",{value:"content",children:"\ub0b4\uc6a9"}),(0,c.jsx)("option",{value:"email",children:"\uae00\uc4f4\uc774"})]}),(0,c.jsx)("input",{type:"text",placeholder:"\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694",value:o,onChange:e=>d(e.target.value)}),(0,c.jsx)("button",{onClick:()=>{const e=t.filter((e=>{switch(u){case"title":return e.title.toLowerCase().includes(o.toLowerCase());case"content":return e.content.toLowerCase().includes(o.toLowerCase());case"email":return e.email.toLowerCase().includes(o.toLowerCase());default:return!0}}));let a="all"!==b?e.filter((e=>e.category===b)):e;m(a),x(1)},children:"\uac80\uc0c9"})," "]}),(0,c.jsxs)("table",{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"ID"}),(0,c.jsx)("th",{children:"\uc81c\ubaa9"}),(0,c.jsx)("th",{children:"\uce74\ud14c\uace0\ub9ac"}),(0,c.jsx)("th",{children:"\uae00\uc4f4\uc774"}),(0,c.jsx)("th",{children:"\uc870\ud68c\uc218"}),(0,c.jsx)("th",{children:"\ub313\uae00\uc218"}),(0,c.jsx)("th",{children:"\ud30c\uc77c"}),(0,c.jsx)("th",{children:"createTime"}),(0,c.jsx)("th",{children:"updateTime"}),(0,c.jsx)("th",{children:"\uc218\uc815"})]})}),(0,c.jsx)("tbody",{children:E.map((e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.id}),(0,c.jsx)("td",{className:"boardList_title",children:e.title}),(0,c.jsx)("td",{children:e.category}),(0,c.jsx)("td",{children:e.memberNickName}),(0,c.jsx)("td",{children:e.hit}),(0,c.jsx)("td",{children:e.replyCount}),(0,c.jsxs)("td",{children:[" ",e.newImgName?(0,c.jsx)("img",{src:`http://43.201.20.172:8090/upload/${e.newImgName}`,alt:e.oldImgName}):"\uc5c6\uc74c"]}),(0,c.jsx)("td",{children:A(e.createTime)}),(0,c.jsx)("td",{children:A(e.updateTime)}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{onClick:()=>(e=>{T({id:e.id,title:e.title,content:e.content,category:e.category,email:e.email,nickname:e.memberNickName,itemFile:null}),f(e),y(!0)})(e),children:" \uc218\uc815"})})]},e.id)))})]}),(0,c.jsxs)("div",{className:"pagination",children:[(0,c.jsx)("button",{onClick:()=>M(0),disabled:0===S,children:"\ucc98\uc74c"}),(0,c.jsx)("button",{onClick:()=>M(S-1),disabled:0===S,children:"\uc774\uc804"}),q.map((e=>(0,c.jsx)("button",{onClick:()=>M(e),className:S===e?"active":"",children:e+1},e))),(0,c.jsx)("button",{onClick:()=>M(S+1),disabled:S===D-1,children:"\ub2e4\uc74c"}),(0,c.jsx)("button",{onClick:()=>M(D-1),disabled:S===D-1,children:"\ub9c8\uc9c0\ub9c9"})]}),k&&(0,c.jsx)("div",{className:"admin-modal",children:(0,c.jsxs)("div",{className:"admin-modal-content",children:[(0,c.jsx)("h3",{children:"\uac8c\uc2dc\uae00 \uc218\uc815"}),(0,c.jsxs)("div",{className:"board-memberNickName",children:[(0,c.jsx)("span",{children:"\uc791\uc131\uc790"}),(0,c.jsx)("input",{type:"text",name:"nickname",value:F.nickname,onChange:z})]}),(0,c.jsxs)("div",{className:"board-title",children:[(0,c.jsx)("span",{children:"\uc81c\ubaa9"}),(0,c.jsx)("input",{type:"text",name:"title",value:F.title,onChange:z})]}),(0,c.jsxs)("div",{className:"board-category",children:[(0,c.jsx)("span",{children:"\uce74\ud14c\uace0\ub9ac"}),(0,c.jsxs)("select",{value:F.category,onChange:z,name:"category",children:[(0,c.jsx)("option",{value:"\uc601\ud654\uac8c\uc2dc\ud310",children:"\uc601\ud654\uac8c\uc2dc\ud310"}),(0,c.jsx)("option",{value:"\uc790\uc720\uac8c\uc2dc\ud310",children:"\uc790\uc720\uac8c\uc2dc\ud310"}),(0,c.jsx)("option",{value:"\ubb38\uc758\uac8c\uc2dc\ud310",children:"\ubb38\uc758\uac8c\uc2dc\ud310"}),null!==(e=N.roleNames)&&void 0!==e&&e.includes("ADMIN")?(0,c.jsx)("option",{value:"\uacf5\uc9c0\uc0ac\ud56d",children:"\uacf5\uc9c0\uc0ac\ud56d"}):(0,c.jsx)(c.Fragment,{})]})]}),(0,c.jsxs)("div",{className:"board-content",children:[(0,c.jsx)("span",{children:"\ub0b4\uc6a9"}),(0,c.jsx)("textarea",{name:"content",value:F.content,onChange:z})]}),(0,c.jsxs)("div",{className:"board-upload",children:[(0,c.jsx)("span",{children:"\ud30c\uc77c"}),(0,c.jsx)("input",{type:"file",id:"file-upload",style:{display:"none"},onChange:e=>{const t=e.target.files[0];if(t){const a=["jpg","jpeg","png","gif","bmp","svg"],n=t.name.split(".").pop().toLowerCase();if(!a.includes(n))return alert("\ud5c8\uc6a9\ub418\uc9c0 \uc54a\uc740 \ud30c\uc77c \ud615\uc2dd\uc785\ub2c8\ub2e4."),e.target.value="",void T((e=>({...e,itemFile:null})));T((e=>({...e,itemFile:t})))}}}),(0,c.jsxs)("div",{className:"file-upload",children:[(0,c.jsx)("label",{htmlFor:"file-upload",className:"upload-btn",children:"\ud30c\uc77c \uc120\ud0dd"}),(0,c.jsx)("span",{id:"file-name-display",children:F.itemFile?F.itemFile.name:null!==C&&void 0!==C&&C.oldImgName?C.oldImgName:"\uc120\ud0dd\ub41c \ud30c\uc77c \uc5c6\uc74c"})]})]}),(0,c.jsxs)("div",{className:"modal-actions",children:[(0,c.jsx)("button",{onClick:async()=>{try{await r.A.delete(`http://43.201.20.172:8090/admin/board/delete/${C.id}`);const e=await s.A.get("http://43.201.20.172:8090/board/List");a(e.data),m(e.data),y(!1)}catch(e){console.error("\uc0ad\uc81c \uc2e4\ud328:",e)}},children:"\uc0ad\uc81c"}),(0,c.jsx)("button",{onClick:async()=>{const e=new FormData;e.append("id",F.id),e.append("title",F.title),e.append("content",F.content),e.append("category",F.category),e.append("email",F.email),F.itemFile&&e.append("itemFile",F.itemFile);try{await r.A.post("http://43.201.20.172:8090/admin/board/update",e);const t=await s.A.get("http://43.201.20.172:8090/board/List");a(t.data),m(t.data),y(!1)}catch(t){console.error("\uac8c\uc2dc\uae00 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",t)}},children:"\uc218\uc815"}),(0,c.jsx)("span",{className:"modal-close-btn",onClick:()=>y(!1),children:"\u2716"})]})]})})]})}},8127:()=>{},9320:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(6213),s=a(8056);const i=n.A.create();i.interceptors.request.use((e=>{const t=(0,s.Ri)("member");if(!t)return Promise.reject({response:{data:{error:"REQUIRE_LOGIN"}}});const{accessToken:a}=t;return e.headers.Authorization=`Bearer ${a}`,e}),(e=>Promise.reject(e))),i.interceptors.response.use((async e=>{const t=e.data;if(t&&"ERROR_ACCESS_TOKEN"===t.error){const t=(0,s.Ri)("member"),a=await(async(e,t)=>{const a={headers:{Authorization:`Bearer ${e}`}};return(await n.A.get(`http://43.201.20.172:8090/api/member/refresh?refreshToken=${t}`,a)).data})(t.accessToken,t.refreshToken);t.accessToken=a.accessToken,t.refreshToken=a.refreshToken,(0,s.TV)("member",JSON.stringify(t),1);const i=e.config;return i.headers.Authorization=`Bearer ${a.accessToken}`,await(0,n.A)(i)}return e}),(e=>Promise.reject(e)));const l=i}}]);
//# sourceMappingURL=577.7d2129c0.chunk.js.map