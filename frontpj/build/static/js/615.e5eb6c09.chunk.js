"use strict";(self.webpackChunkfrontpj=self.webpackChunkfrontpj||[]).push([[615],{9320:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(6213),r=n(8056);const s=a.A.create();s.interceptors.request.use((e=>{const t=(0,r.Ri)("member");if(!t)return Promise.reject({response:{data:{error:"REQUIRE_LOGIN"}}});const{accessToken:n}=t;return e.headers.Authorization=`Bearer ${n}`,e}),(e=>Promise.reject(e))),s.interceptors.response.use((async e=>{const t=e.data;if(t&&"ERROR_ACCESS_TOKEN"===t.error){const t=(0,r.Ri)("member"),n=await(async(e,t)=>{const n={headers:{Authorization:`Bearer ${e}`}};return(await a.A.get(`http://43.201.20.172:8090/api/member/refresh?refreshToken=${t}`,n)).data})(t.accessToken,t.refreshToken);t.accessToken=n.accessToken,t.refreshToken=n.refreshToken,(0,r.TV)("member",JSON.stringify(t),1);const s=e.config;return s.headers.Authorization=`Bearer ${n.accessToken}`,await(0,a.A)(s)}return e}),(e=>Promise.reject(e)));const o=s},9615:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(5043),r=n(7285),s=n(3222),o=n(7807),i=n(6213),c=n(4449),l=n(912),d=n(9311),u=n(579);const h=e=>{let{open:t,setOpen:n,newEvent:a,setNewEvent:r,addEvent:s}=e;return(0,u.jsx)(c.A,{open:t,onClose:()=>n(!1),children:(0,u.jsxs)("div",{style:{padding:20,background:"#fff",margin:"10% auto",width:400},children:[(0,u.jsx)("h3",{style:{color:"black"},children:"\uce98\ub9b0\ub354\ub97c \ub4dc\ub798\uadf8 \ud574 \uc77c\uc815 \ucd94\uac00\ub3c4 \uac00\ub2a5\ud569\ub2c8\ub2e4."}),(0,u.jsx)(l.A,{label:"\uc77c\uc815 \ub0b4\uc6a9",fullWidth:!0,value:a.content,onChange:e=>r({...a,content:e.target.value})}),(0,u.jsx)(l.A,{label:"\uc2dc\uc791 \ub0a0\uc9dc",type:"datetime-local",fullWidth:!0,InputLabelProps:{shrink:!0},value:a.start,onChange:e=>r({...a,start:e.target.value})}),(0,u.jsx)(l.A,{label:"\uc885\ub8cc \ub0a0\uc9dc",type:"datetime-local",fullWidth:!0,InputLabelProps:{shrink:!0},value:a.end,onChange:e=>r({...a,end:e.target.value})}),(0,u.jsx)(d.A,{variant:"contained",color:"primary",onClick:s,fullWidth:!0,children:"\ucd94\uac00"}),(0,u.jsx)(d.A,{variant:"outlined",color:"secondary",onClick:()=>n(!1),fullWidth:!0,children:"\ucde8\uc18c"})]})})};var p=n(9320);const v=async()=>{try{return(await i.A.get("https://www.googleapis.com/calendar/v3/calendars/ko.south_korea%23holiday%40group.v.calendar.google.com/events",{params:{key:"process.env.REACT_APP_GOOGLE_API_KEY"}})).data.items.map((e=>({id:`holiday-${e.id}`,title:e.summary,start:e.start.date||e.start.dateTime.split("T")[0],end:e.end.date||e.end.dateTime.split("T")[0],isHoliday:!0})))}catch(e){return console.error("\uacf5\ud734\uc77c \ub85c\ub529 \uc624\ub958:",e),[]}},m=()=>{const[e,t]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),[c,l]=(0,a.useState)(!1),[d,m]=(0,a.useState)({content:"",start:"",end:""}),y=async()=>{try{const[e,n]=await Promise.all([p.A.get("http://43.201.20.172:8090/admin/calendar"),v()]);i(n),t([...e.data,...n])}catch(e){console.error("\uc77c\uc815 \ub85c\ub529 \uc624\ub958:",e)}};(0,a.useEffect)((()=>{y()}),[]);return(0,u.jsxs)("div",{children:[(0,u.jsx)(r.A,{plugins:[s.A,o.Ay],initialView:"dayGridMonth",events:e.map((e=>({id:e.id,title:e.content||e.title,start:e.start,end:e.end,isHoliday:e.isHoliday}))),selectable:!0,select:e=>{const t=e.startStr+"T00:00",n=new Date(e.endStr);n.setDate(n.getDate()-1);const a=n.toISOString().split("T")[0]+"T23:59";m({content:"",start:t,end:a}),l(!0)},eventClick:e=>{e.event.extendedProps.isHoliday||(async e=>{if(window.confirm("\uc815\ub9d0\ub85c \uc774 \uc77c\uc815\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await p.A.delete(`http://43.201.20.172:8090/admin/calendar/${e}`),alert("\uc77c\uc815\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),await y()}catch(t){console.error("\uc77c\uc815 \uc0ad\uc81c \uc624\ub958:",t)}})(e.event.id)},eventContent:e=>{const{isHoliday:t}=e.event.extendedProps,n=e.event.start;let a="";if(t)a=`<b>${e.event.title}</b>`;else if(n&&n.toISOString().includes("T")){a=`<b>${new Date(n).toLocaleTimeString("ko-KR",{hour:"numeric",minute:"numeric",hour12:!0})}</b> ${e.event.title}`}else a=e.event.title;return{html:a}},customButtons:{addEventButton:{text:"\uc77c\uc815 \ucd94\uac00",click:()=>l(!0)}},headerToolbar:{left:"prev,next today",center:"title",right:"addEventButton"}}),(0,u.jsx)(h,{open:c,setOpen:l,newEvent:d,setNewEvent:m,addEvent:async()=>{try{console.log("\ubcf4\ub0b4\ub294 \uc774\ubca4\ud2b8 \ub370\uc774\ud130: ",d),await p.A.post("http://43.201.20.172:8090/admin/calendar",d,{headers:{"Content-Type":"application/json"}}),await y(),l(!1),m({content:"",start:"",end:""})}catch(e){console.error("\uc77c\uc815 \ucd94\uac00 \uc624\ub958:",e)}}})]})},y=()=>(0,u.jsx)("div",{children:(0,u.jsx)(m,{})})}}]);
//# sourceMappingURL=615.e5eb6c09.chunk.js.map