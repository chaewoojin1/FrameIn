"use strict";(self.webpackChunkfrontpj=self.webpackChunkfrontpj||[]).push([[931],{1931:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var s=n(5043),r=n(9320),a=n(579);const c=()=>{const[e,t]=(0,s.useState)([]),[n,c]=(0,s.useState)("email"),[i,o]=(0,s.useState)(""),[l,h]=(0,s.useState)(0),[d]=(0,s.useState)(10),[m,u]=(0,s.useState)(0);(0,s.useEffect)((()=>{p()}),[l]);const p=async()=>{try{const e={page:l,size:d};i.trim()&&("email"===n?e.email=i:"paymentMethod"===n&&(e.paymentMethod=i));const t=await r.A.get("http://43.201.20.172:8090/admin/payment/search",{params:e});j(t.data.content),u(t.data.totalPages)}catch(e){console.error("\uacb0\uc81c \ub9ac\uc2a4\ud2b8\ub97c \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}},j=e=>{const n=e.reduce(((e,t)=>{const n=new Date(t.createTime).toLocaleString();return e[n]||(e[n]={createTime:t.createTime,email:t.email,paymentMethod:t.paymentMethod,totalAmount:t.totalAmount,payments:[]}),e[n].payments.push(t),e}),{});t(Object.values(n))},x=e=>{e>=0&&e<m&&h(e)},y=Math.max(0,l-2),b=Math.min(m-1,l+2),g=[];for(let s=y;s<=b;s++)g.push(s);return(0,a.jsxs)("div",{className:"payment-list",children:[(0,a.jsx)("h2",{children:"\uacb0\uc81c \ub9ac\uc2a4\ud2b8"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h(0),p()},className:"search-form",children:[(0,a.jsxs)("select",{value:n,onChange:e=>c(e.target.value),children:[(0,a.jsx)("option",{value:"email",children:"\uc774\uba54\uc77c"}),(0,a.jsx)("option",{value:"paymentMethod",children:"\uacb0\uc81c \ubc29\ubc95"})]}),(0,a.jsx)("input",{type:"text",placeholder:"email"===n?"\uc774\uba54\uc77c \uc785\ub825":"\uacb0\uc81c \ubc29\ubc95 \uc785\ub825 (\uc608: kakaopay)",value:i,onChange:e=>o(e.target.value)}),(0,a.jsx)("button",{type:"submit",children:"\uac80\uc0c9"})]}),(0,a.jsxs)("table",{border:"1",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"\uacb0\uc81c \ub0a0\uc9dc"}),(0,a.jsx)("th",{children:"\uc774\uba54\uc77c"}),(0,a.jsx)("th",{children:"\uacb0\uc81c \ubc29\ubc95"}),(0,a.jsx)("th",{children:"\ucd1d \uacb0\uc81c \uae08\uc561"}),(0,a.jsx)("th",{children:"\uc601\ud654 \uc81c\ubaa9"}),(0,a.jsx)("th",{children:"\uc0c1\uc601\uc77c"}),(0,a.jsx)("th",{children:"\uc0c1\uc601 \uc2dc\uc791 \uc2dc\uac04"}),(0,a.jsx)("th",{children:"\uc0c1\uc601 \uc885\ub8cc \uc2dc\uac04"}),(0,a.jsx)("th",{children:"\uc88c\uc11d"})]})}),(0,a.jsx)("tbody",{children:e.length>0?e.map(((e,t)=>e.payments.map(((n,s)=>(0,a.jsxs)("tr",{children:[0===s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{rowSpan:e.payments.length,children:new Date(e.createTime).toLocaleString()}),(0,a.jsx)("td",{rowSpan:e.payments.length,children:e.email||"N/A"}),(0,a.jsx)("td",{rowSpan:e.payments.length,children:e.paymentMethod}),(0,a.jsxs)("td",{rowSpan:e.payments.length,children:[e.totalAmount.toLocaleString(),"\uc6d0"]})]}):null,(0,a.jsx)("td",{children:n.movieNm}),(0,a.jsx)("td",{children:n.screeningDate}),(0,a.jsx)("td",{children:n.screeningTime}),(0,a.jsx)("td",{children:n.screeningEndTime}),(0,a.jsx)("td",{children:n.seatNumber})]},`${t}-${s}`))))):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"9",children:"\uacb0\uc81c \ub0b4\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})})})]}),(0,a.jsxs)("div",{className:"pagination",children:[(0,a.jsx)("button",{onClick:()=>x(0),disabled:0===l,children:"\ucc98\uc74c"}),(0,a.jsx)("button",{onClick:()=>x(l-1),disabled:0===l,children:"\uc774\uc804"}),g.map((e=>(0,a.jsx)("button",{onClick:()=>x(e),className:l===e?"active":"",children:e+1},e))),(0,a.jsx)("button",{onClick:()=>x(l+1),disabled:l===m-1,children:"\ub2e4\uc74c"}),(0,a.jsx)("button",{onClick:()=>x(m-1),disabled:l===m-1,children:"\ub9c8\uc9c0\ub9c9"})]})]})}},9320:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(6213),r=n(8056);const a=s.A.create();a.interceptors.request.use((e=>{const t=(0,r.Ri)("member");if(!t)return Promise.reject({response:{data:{error:"REQUIRE_LOGIN"}}});const{accessToken:n}=t;return e.headers.Authorization=`Bearer ${n}`,e}),(e=>Promise.reject(e))),a.interceptors.response.use((async e=>{const t=e.data;if(t&&"ERROR_ACCESS_TOKEN"===t.error){const t=(0,r.Ri)("member"),n=await(async(e,t)=>{const n={headers:{Authorization:`Bearer ${e}`}};return(await s.A.get(`http://43.201.20.172:8090/api/member/refresh?refreshToken=${t}`,n)).data})(t.accessToken,t.refreshToken);t.accessToken=n.accessToken,t.refreshToken=n.refreshToken,(0,r.TV)("member",JSON.stringify(t),1);const a=e.config;return a.headers.Authorization=`Bearer ${n.accessToken}`,await(0,s.A)(a)}return e}),(e=>Promise.reject(e)));const c=a}}]);
//# sourceMappingURL=931.147341ae.chunk.js.map