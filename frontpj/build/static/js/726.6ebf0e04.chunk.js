"use strict";(self.webpackChunkfrontpj=self.webpackChunkfrontpj||[]).push([[726],{726:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var s=n(5043),i=n(1675),c=n(6213),a=n(6772),r=n(579);const l=()=>{var e,t,n;const{movieId:l}=(0,i.g)(),[d,h]=(0,s.useState)([]),[o,m]=(0,s.useState)([]),[j,x]=(0,s.useState)([]),[u,v]=(0,s.useState)([]),[p,g]=(0,s.useState)(""),[f,y]=(0,s.useState)(null),[E,S]=(0,s.useState)([]),[N,w]=(0,s.useState)(""),[D,k]=(0,s.useState)([]),[b,$]=(0,s.useState)(""),[C,_]=(0,s.useState)(!1),[I,T]=(0,s.useState)(!1),[A,M]=(0,s.useState)(!1),[R,B]=(0,s.useState)(!1),F=(0,i.Zp)(),K=["\uc11c\uc6b8","\uacbd\uae30","\uc778\ucc9c","\uac15\uc6d0","\ub300\uc804/\ucda9\uccad/\uc138\uc885","\ub300\uad6c/\uacbd\uc0c1","\uad11\uc8fc/\uc804\ub77c","\ubd80\uc0b0","\uc81c\uc8fc"],L=e=>{const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()} (${["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"][t.getDay()]})`},O=(0,s.useRef)(b),Z=(0,s.useRef)(N);(0,s.useEffect)((()=>{(async()=>{if(!R)try{const e=await c.A.get(`http://43.201.20.172:8090/api/screening/${l}`),t=Array.isArray(e.data)?e.data:[],n=(new Date).toISOString().split("T")[0],s=[...new Set(t.map((e=>e.screeningDate)))].filter((e=>e>=n));v(s),h(t);const i=[...new Set(t.map((e=>e.theaterEntity.cinemaEntity.region)))],a=K.filter((e=>i.includes(e)));k(a),a.length>0&&!b&&($(a[0]),_(!0)),B(!0)}catch(e){console.error("Error fetching data:",e)}if(b&&d.length>0){O.current!==b&&(w(""),g(""),m([]),O.current=b);const e=[...new Set(d.filter((e=>e.theaterEntity.cinemaEntity.region===b)).map((e=>e.theaterEntity.cinemaEntity.cinemaName)))];S(e),_(!0),T(!1),M(!1)}if(N&&d.length>0){Z.current!==N&&(g(""),m([]),Z.current=N);const e=[...new Set(d.filter((e=>e.theaterEntity.cinemaEntity.cinemaName===N)).map((e=>e.screeningDate)))].filter((e=>u.includes(e)));x(e),T(!0),M(!1)}if(p&&N&&d.length>0){const e=new Date,t=d.filter((e=>e.screeningDate===p)).filter((e=>e.theaterEntity.cinemaEntity.cinemaName===N)).filter((t=>new Date(`${t.screeningDate}T${t.screeningTime}`)>=e));m(t),M(!0)}})()}),[l,b,N,p,R]);const q=(0,a.S)(Number(null===(e=d[0])||void 0===e||null===(t=e.movieEntity)||void 0===t?void 0:t.audiAcc)||0,1500);return(0,r.jsx)("div",{className:"content",children:(0,r.jsx)("div",{className:"main",children:(0,r.jsxs)("div",{className:"main-con",children:[(0,r.jsx)("div",{className:"leftBar",children:(0,r.jsx)("div",{className:"leftBar-con",children:d.length>0&&null!==(n=d[0])&&void 0!==n&&n.movieEntity?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{src:d[0].movieEntity.poster_path,alt:d[0].movieEntity.movieNm,className:"poster"}),(0,r.jsxs)("div",{className:"movie-info",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"\uc81c\ubaa9"}),(0,r.jsx)("span",{children:d[0].movieEntity.movieNm})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"\uac1c\ubd09\uc77c"}),(0,r.jsx)("span",{children:d[0].movieEntity.openDt})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"\uc21c\uc704"}),(0,r.jsxs)("span",{children:[d[0].movieEntity.rank,"\ub4f1"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"\ub204\uc801 \uad00\uac1d \uc218"}),(0,r.jsxs)("span",{children:[q.toLocaleString("ko-KR"),"\uba85"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"\uc7a5\ub974"}),(0,r.jsx)("span",{children:d[0].movieEntity.genres})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"\uac10\ub3c5"}),(0,r.jsx)("span",{children:d[0].movieEntity.director})]})]})]}):(0,r.jsx)("p",{children:"\uc601\ud654 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})})}),(0,r.jsx)("div",{className:"screening-content",children:(0,r.jsxs)("div",{className:"date_type",children:[(0,r.jsxs)("div",{className:"region_select",children:[(0,r.jsx)("h2",{children:"\uc9c0\uc5ed"}),D.map((e=>(0,r.jsx)("button",{className:b===e?"selected":"",onClick:()=>(e=>{$(e)})(e),children:e},e)))]}),(0,r.jsxs)("div",{className:"cinema_select",children:[(0,r.jsx)("h2",{children:"\uc601\ud654\uad00"}),C?E.map((e=>(0,r.jsx)("button",{className:N===e?"selected":"",onClick:()=>(e=>{w(e)})(e),children:e},e))):(0,r.jsx)("p",{children:"\uc601\ud654\uad00\uc744 \uc120\ud0dd\ud558\uc138\uc694."})]}),(0,r.jsxs)("div",{className:"date_select",children:[(0,r.jsx)("h2",{children:"\ub0a0\uc9dc"}),I?j.length>0?j.map((e=>(0,r.jsx)("button",{className:p===e?"selected":"",onClick:()=>(e=>{g(e)})(e),children:L(e)},e))):(0,r.jsx)("p",{children:"\uc0c1\uc601\ub0a0\uc9dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,r.jsx)("p",{children:"\ub0a0\uc9dc\ub97c \uc120\ud0dd\ud558\uc138\uc694."})]}),(0,r.jsxs)("div",{className:"time_select",children:[(0,r.jsx)("h2",{children:"\uc2dc\uac04"}),A?0===o.length?(0,r.jsx)("p",{children:"\uc0c1\uc601 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,r.jsx)("ul",{children:o.map((e=>(0,r.jsx)("li",{children:(0,r.jsxs)("button",{className:f===e.id?"selected":"",onClick:()=>(e=>{var t;y(e),F(`/seatSelection/${e}`,{state:{movieEntity:null===(t=d[0])||void 0===t?void 0:t.movieEntity}})})(e.id),children:[(0,r.jsx)("span",{children:e.theaterEntity.name}),(0,r.jsx)("span",{children:L(e.screeningDate)}),(0,r.jsxs)("span",{children:[e.screeningTime," ~ ",e.screeningEndTime]})]})},e.id)))}):(0,r.jsx)("p",{children:"\uc2dc\uac04\uc744 \uc120\ud0dd\ud558\uc138\uc694."})]})]})})]})})})},d=()=>(0,r.jsx)("div",{children:(0,r.jsx)(l,{})})},6772:(e,t,n)=>{n.d(t,{S:()=>i});var s=n(5043);const i=(e,t)=>{const[n,i]=(0,s.useState)(0),c=1e3/60,a=Math.round(t/c),r=(0,s.useRef)(0);return(0,s.useEffect)((()=>{const t=setInterval((()=>{const n=1===(s=++r.current/a)?1:1-Math.pow(2,-10*s);var s;i(Math.round(e*n)),1===n&&clearInterval(t)}),c);return()=>clearInterval(t)}),[e,t]),n}}}]);
//# sourceMappingURL=726.6ebf0e04.chunk.js.map