"use strict";(self.webpackChunkfrontpj=self.webpackChunkfrontpj||[]).push([[481],{4481:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var s=r(5043),a=r(9320),n=r(579);const c=e=>{const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}`},i=()=>{const[e,t]=(0,s.useState)([]);return console.log(e),(0,s.useEffect)((()=>{(async()=>{try{const e=(await a.A.get("http://43.201.20.172:8090/api/myinfo/detail")).data.chatMessageEntities||[];e.sort(((e,t)=>new Date(t.createTime)-new Date(e.createTime))),t(e)}catch(e){console.error("\uba54\uc2dc\uc9c0 \ubaa9\ub85d \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}})()}),[]),(0,n.jsxs)("div",{className:"chatList",children:[(0,n.jsx)("h3",{children:"\uba54\uc2dc\uc9c0 \ubaa9\ub85d"}),e.length>0?(0,n.jsx)("ul",{children:e.map(((e,t)=>(0,n.jsx)("li",{children:(0,n.jsxs)("div",{className:"message",children:[(0,n.jsx)("span",{className:"messageContent",children:e.content}),(0,n.jsx)("span",{className:"messageTime",children:e.createTime?c(e.createTime):"\uc2dc\uac04 \uc815\ubcf4 \uc5c6\uc74c"})]})},t)))}):(0,n.jsx)("p",{children:"\uba54\uc2dc\uc9c0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]})},o=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i,{})})},9320:(e,t,r)=>{r.d(t,{A:()=>c});var s=r(6213),a=r(8056);const n=s.A.create();n.interceptors.request.use((e=>{const t=(0,a.Ri)("member");if(!t)return Promise.reject({response:{data:{error:"REQUIRE_LOGIN"}}});const{accessToken:r}=t;return e.headers.Authorization=`Bearer ${r}`,e}),(e=>Promise.reject(e))),n.interceptors.response.use((async e=>{const t=e.data;if(t&&"ERROR_ACCESS_TOKEN"===t.error){const t=(0,a.Ri)("member"),r=await(async(e,t)=>{const r={headers:{Authorization:`Bearer ${e}`}};return(await s.A.get(`http://43.201.20.172:8090/api/member/refresh?refreshToken=${t}`,r)).data})(t.accessToken,t.refreshToken);t.accessToken=r.accessToken,t.refreshToken=r.refreshToken,(0,a.TV)("member",JSON.stringify(t),1);const n=e.config;return n.headers.Authorization=`Bearer ${r.accessToken}`,await(0,s.A)(n)}return e}),(e=>Promise.reject(e)));const c=n}}]);
//# sourceMappingURL=481.4bfd2106.chunk.js.map